
    
        const scripts = [
            `Y29uc3Qgbm9kZXMgPSBbCiAgeyJpZCI6ICJzdGFydDAiICwgInR4dCI6ICImIzEyODA3NTtIZWxsbyBhbmQgd2VsY29tZSB0byB0aGUgSVQgSGVscCBEZXNrIFN1cHBvcnQgQ2hhdC4gPGJyLz48YnIvPkknbSB0aGUgSVQgQm90ISAmIzEyODUyMjxici8+PGJyLz4gSGVyZSB0byBhc3Npc3QgeW91IHdpdGggYW55IHRlY2huaWNhbCBpc3N1ZXMuIiAsICJ0eXAiOiAxfSwKICB7ImlkIjogInN0YXJ0MSIgLCAidHh0IjogIkknbGwgcHJvdmlkZSB5b3Ugd2l0aCBwcm9tcHQgYXNzaXN0YW5jZS4iICwgInR5cCI6IDF9LAogIHsiaWQiOiAic3RhcnQiICwgInR4dCI6ICJIb3cgY2FuIEkgYXNzaXN0IHlvdSB0b2RheT88YnIvPjxici8+Tm90ZTogUGxlYXNlIHNlbGVjdCB5b3VyIGFuc3dlciBmcm9tIHRoZSBvcHRpb25zIHNob3duIGluIHRoZSBzZWxlY3Rpb24gcGFuZWwgZ2l2ZW4gYXQgdGhlIGJvdHRvbSBvZiB0aGlzIGNoYXQgd2luZG93LiIgLCAidHlwIjogMX0sCiAgeyJpZCI6ICJrZXlib2FyZCIgLCAidHh0IjogIlBsZWFzZSBkZXNjcmliZSB5b3VyIGxhcHRvcCA8Yj5LZXlib2FyZCBvciBNb3VzZTwvYj4gcmVsYXRlZCBpc3N1ZSwgZmVlbCBmcmVlIHRvIGFzayBxdWVzdGlvbnMuICBJIHdpbGwgZ3VpZGUgeW91IHRocm91Z2ggdHJvdWJsZXNob290aW5nIHN0ZXBzIiAsICJ0eXAiOiAyLCAiZGt5IjoiMWMyYzlmYTQtNDI3Mi0xMWVmLThkNzAtNDIwMDRlNDk0MzAwIn0sCiAgeyJpZCI6ICJjYW1lcmEiICwgInR4dCI6ICJQbGVhc2UgZGVzY3JpYmUgeW91ciBsYXB0b3AgPGI+Q2FtZXJhPC9iPiBpc3N1ZSwgZmVlbCBmcmVlIHRvIGFzayBxdWVzdGlvbnMuIEkgd2lsbCBndWlkZSB5b3UgdGhyb3VnaCB0cm91Ymxlc2hvb3Rpbmcgc3RlcHMiICwgInR5cCI6IDIsICJka3kiOiI4ZDRmZjYzZS00NGMyLTExZWYtOTU4Yi00MjAwNGU0OTQzMDAifSwKICB7ImlkIjogIndpZmkiICwgInR4dCI6ICJQbGVhc2UgZGVzY3JpYmUgeW91ciBsYXB0b3AgPGI+V2lGaTwvYj4gcmVsYXRlZCBpc3N1ZSwgZmVlbCBmcmVlIHRvIGFzayBxdWVzdGlvbnMuIEkgd2lsbCBndWlkZSB5b3UgdGhyb3VnaCB0cm91Ymxlc2hvb3Rpbmcgc3RlcHMiICwgInR5cCI6IDIsICJka3kiOiIyZDVhN2EyOC00NGMzLTExZWYtOTU4Yi00MjAwNGU0OTQzMDAifSwKICB7ImlkIjogInNsb3ciICwgInR4dCI6ICJQbGVhc2UgZGVzY3JpYmUgeW91ciBsYXB0b3AgPGI+U2xvdyBEb3duPC9iPiBpc3N1ZSwgZmVlbCBmcmVlIHRvIGFzayBxdWVzdGlvbnMuIEkgd2lsbCBndWlkZSB5b3UgdGhyb3VnaCB0cm91Ymxlc2hvb3Rpbmcgc3RlcHMiICwgInR5cCI6IDIsICJka3kiOiI2NzYzYjZiYy00NGMzLTExZWYtODJjMC00MjAwNGU0OTQzMDAifSwKICB7ImlkIjogIm1zX2luc3RhbGwiICwgInR4dCI6ICJQbGVhc2UgZmVlbCBmcmVlIHRvIGFzayBxdWVzdGlvbnMuIEkgd2lsbCBndWlkZSB5b3UgdGhyb3VnaCB0aGUgc3RlcHMiICwgInR5cCI6IDIsICJka3kiOiIyYjJhODZiNi00NGM0LTExZWYtYTA0Mi00MjAwNGU0OTQzMDAifSwKICB7ImlkIjogIm1zX29sb29rIiAsICJ0eHQiOiAiUGxlYXNlIGZlZWwgZnJlZSB0byBhc2sgcXVlc3Rpb25zLiBJIHdpbGwgZ3VpZGUgeW91IHRocm91Z2ggdGhlIHN0ZXBzIiAsICJ0eXAiOiAyLCAiZGt5IjoiNGQ2ZjM2YWUtNDRjNC0xMWVmLTk1OGItNDIwMDRlNDk0MzAwIn0sCiAgeyJpZCI6ICJtc19zaWduaW4iICwgInR4dCI6ICJQbGVhc2UgZmVlbCBmcmVlIHRvIGFzayBxdWVzdGlvbnMuIEkgd2lsbCBndWlkZSB5b3UgdGhyb3VnaCB0aGUgc3RlcHMiICwgInR5cCI6IDIsICJka3kiOiI2OWQ5ZDZhYS00NGM0LTExZWYtOTU4Yi00MjAwNGU0OTQzMDAifSwKICB7ImlkIjogIm1zX29uZWRyaXZlIiAsICJ0eHQiOiAiUGxlYXNlIGZlZWwgZnJlZSB0byBhc2sgcXVlc3Rpb25zLiBJIHdpbGwgZ3VpZGUgeW91IHRocm91Z2ggdGhlIHN0ZXBzIiAsICJ0eXAiOiAyLCAiZGt5IjoiODhjOTQ1ZTYtNDRjNC0xMWVmLWEwNDItNDIwMDRlNDk0MzAwIn0sCiAgeyJpZCI6ICJtc19wY3JlcSIgLCAidHh0IjogIlBsZWFzZSBmZWVsIGZyZWUgdG8gYXNrIHF1ZXN0aW9ucy4gSSB3aWxsIGd1aWRlIHlvdSB0aHJvdWdoIHRoZSBzdGVwcyIgLCAidHlwIjogMiwgImRreSI6ImE2ODA5MGU0LTQ0YzQtMTFlZi05NThiLTQyMDA0ZTQ5NDMwMCJ9LAogIHsiaWQiOiAibXNfdGVhbXMiICwgInR4dCI6ICJQbGVhc2UgZmVlbCBmcmVlIHRvIGFzayBxdWVzdGlvbnMuIEkgd2lsbCBndWlkZSB5b3UgdGhyb3VnaCB0aGUgc3RlcHMiICwgInR5cCI6IDIsICJka3kiOiJiZDhlYzRhNC00NGM0LTExZWYtOTU4Yi00MjAwNGU0OTQzMDAifSwKICB7ImlkIjogInJhdGV1cyIgLCAidHh0IjogIktpbmRseSBzZWxlY3QgeW91ciByYXRpbmciICwgInR5cCI6IDF9LAogIHsiaWQiOiAicmF0ZXVzMiIgLCAidHh0IjogIlRoYW5rIHlvdSBmb3IgeW91ciByYXRpbmchIiAsICJ0eXAiOiAxfSwKICB7ImlkIjogInRpY2tldCIgLCAidHh0IjogIktpbmRseSB2aXNpdCA8YSBocmVmPWh0dHBzOi8vc3VwcG9ydC5waXJhbWFsZm91bmRhdGlvbi5vcmcvamlyYS9zZXJ2aWNlZGVzayB0YXJnZXQ9Ymxhbms+SVQgU3VwcG9ydCBEZXNrIFBvcnRhbDwvYT4gdG8gcmVnaXN0ZXIgdGlja2V0IGZvciB5b3VyIHByb2JsZW0iICwgInR5cCI6IDF9LAogIAoKICAKICAgICAgICBdOwoKICAgICAgY29uc3QgZWRnZXMgPSBbCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgeyJuMSI6ICJzdGFydCIgLCAibjIiOiAia2V5Ym9hcmQiICwgInR4dCI6ICJLZXlib2FyZCBhbmQgbW91c2Ugbm90IHJlc3BvbmRpbmciIH0sCiAgICAgICAgeyJuMSI6ICJzdGFydCIgLCAibjIiOiAiY2FtZXJhIiAsICJ0eHQiOiAiQ2FtZXJhIG5vdCB3b3JraW5nIiB9LAogICAgICAgIHsibjEiOiAic3RhcnQiICwgIm4yIjogIndpZmkiICwgInR4dCI6ICJXaUZpIFRyb3VibGVzaG9vdGluZyIgfSwKICAgICAgICB7Im4xIjogInN0YXJ0IiAsICJuMiI6ICJzbG93IiAsICJ0eHQiOiAiU3lzdGVtIFNsb3ciIH0sCiAgICAgICAgeyJuMSI6ICJzdGFydCIgLCAibjIiOiAibXNfaW5zdGFsbCIgLCAidHh0IjogIkRvd25sb2FkIGFuZCBpbnN0YWxsIG9yIHJlLWluc3RhbGwgTWljcm9zb2Z0IDM2NSIgfSwKICAgICAgICB7Im4xIjogInN0YXJ0IiAsICJuMiI6ICJtc19vbG9vayIgLCAidHh0IjogIkJhY2t1cCBlbWFpbCBpbiBPdXRsb29rIG9uIFdpbmRvd3MiIH0sCiAgICAgICAgeyJuMSI6ICJzdGFydCIgLCAibjIiOiAibXNfc2lnbmluIiAsICJ0eHQiOiAiTWljcm9zb2Z0IFNpZ24gaW4gRXJyb3IgMTIwMCwgc29tZXRoaW5nIHdlbnQgd3JvbmcuIiB9LAogICAgICAgIHsibjEiOiAic3RhcnQiICwgIm4yIjogIm1zX29uZWRyaXZlIiAsICJ0eHQiOiAiT25lIERyaXZlIFJlbGF0ZWQiIH0sCiAgICAgICAgeyJuMSI6ICJzdGFydCIgLCAibjIiOiAibXNfdGVhbXMiICwgInR4dCI6ICJNUyBUZWFtcyBSZWxhdGVkIiB9LAogICAgICAgIHsibjEiOiAic3RhcnQiICwgIm4yIjogIm1zX3BjcmVxIiAsICJ0eHQiOiAiU3VibWl0IGEgUEMgU2VydmljZSBSZXF1ZXN0IChMZW5vdm8gT25seSkiIH0sCiAgICAgICAgeyJuMSI6ICJzdGFydCIgLCAibjIiOiAicmF0ZXVzIiAsICJ0eHQiOiAiUmF0ZSB0aGUgY2hhdCBleHBlcmllbmNlISIgfSwKICAgICAgICB7Im4xIjogInN0YXJ0IiAsICJuMiI6ICJ0aWNrZXQiICwgInR4dCI6ICJNeSBwcm9ibGVtIG5vdCBsaXN0ZWQgaGVyZSAvIG15IGlzc3VlIG5vdCBnZXR0aW5nIHJlc29sdmVkIGJ5IHRoZSBDaGF0Qm90IC0gSSB3YW50IHRvIFJlZ2lzdGVyIHRpY2tldCBvbiBzZXJ2aWNlIGRlc2siIH0sCiAgICAgICAgeyJuMSI6ICJyYXRldXMiICwgIm4yIjogInJhdGV1czIiICwgInR4dCI6ICIxeCYjMTI4MDc3IiB9LAogICAgICAgIHsibjEiOiAicmF0ZXVzIiAsICJuMiI6ICJyYXRldXMyIiAsICJ0eHQiOiAiMngmIzEyODA3NyIgfSwKICAgICAgICB7Im4xIjogInJhdGV1cyIgLCAibjIiOiAicmF0ZXVzMiIgLCAidHh0IjogIjN4JiMxMjgwNzciIH0sCiAgICAgICAgeyJuMSI6ICJyYXRldXMiICwgIm4yIjogInJhdGV1czIiICwgInR4dCI6ICI0eCYjMTI4MDc3IiB9LAogICAgICAgIHsibjEiOiAicmF0ZXVzIiAsICJuMiI6ICJyYXRldXMyIiAsICJ0eHQiOiAiNXgmIzEyODA3NyIgfSwKICAgICAgICB7Im4xIjogInJhdGV1czIiICwgIm4yIjogInN0YXJ0IiAsICJ0eHQiOiAiT0siIH0sCgogICAgICAgIHsibjEiOiAidGlja2V0IiAsICJuMiI6ICJzdGFydCIgLCAidHh0IjogIk9LIiB9LAoKCiAgICAgICAgCiAgICAgIAogICAgICAgIAoKICAgICAgICAgCiAgICAgIF07CiAgICA=`,
            `CiAgICAgICAgdmFyIENoYXRMb2c9Jyc7CiAgICAgICAgdmFyIE1zZ0NvdW50PTA7CgogICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgICAgIHZhciBDdXJyZW50Tm9kZT0nc3RhcnQnOyAgCiAgICAgICAgdmFyIFByZXZpb3VzTm9kZXM9W107CgogICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgICAgIGNvbnN0IEdDY29sb3JTaGFkZXMgPSBbCiAgICAgICAgICAgICIjMjQzNjQ2IiwKICAgICAgICAgICAgIiMyRDQ2NTIiLAogICAgICAgICAgICAiIzM1NDc1RiIsCiAgICAgICAgICAgICIjM0Q0ODZCIiwKICAgICAgICAgICAgIiM0NTQ5NzciLAogICAgICAgICAgICAiIzRENEE4NCIsCiAgICAgICAgICAgICIjNTU0QjkwIiwKICAgICAgICAgICAgIiM1RDRDOUMiLAogICAgICAgICAgICAiIzY1NERBOCIsCiAgICAgICAgICAgICIjNkQ0RUI0IiwKICAgICAgICAgICAgIiM3NTRGQzAiLAogICAgICAgICAgICAiIzdENTBDQyIsCiAgICAgICAgICAgICIjODU1MUQ4IiwKICAgICAgICAgICAgIiM4RDUyRTQiLAogICAgICAgICAgICAiIzk1NTNGMCIsCiAgICAgICAgICAgICIjOUQ1NEZDIiwKICAgICAgICAgICAgIiNBNTU2RkYiLAogICAgICAgICAgICAiI0FDNjFGRiIsCiAgICAgICAgICAgICIjQjM2QkZGIiwKICAgICAgICAgICAgIiNCQTc2RkYiLAogICAgICAgICAgICAiI0MyODFGRiIsCiAgICAgICAgICAgICIjQzk4QkZGIiwKICAgICAgICAgICAgIiNEMDk2RkYiLAogICAgICAgICAgICAiI0Q3QTFGRiIsCiAgICAgICAgICAgICIjREVBQkZGIiwKICAgICAgICAgICAgIiNFNUI2RkYiLAogICAgICAgICAgICAiI0VDQzFGRiIsCiAgICAgICAgICAgICIjRjNDQ0ZGIiwKICAgICAgICAgICAgIiNGQUQ2RkYiLAogICAgICAgICAgICAiI0ZGRTFGRiIKICAgICAgICBdOwogICAgICAgIApjb25zdCBHUFRfUFJPTVBUPSAiLCB5b3UgaGF2ZSB0byByZXNwb25kIHdpdGggcGVyc29uYWxpdHkgb2YgYSBzdXBwb3J0IGJvdCwgZG8gbm90IGFuc3dlciBhbnkgb3V0IG90aGUgY29udGV4dCBxdWVyeSwgZG8gbm90IHJldmVhbCBpbiB5b3VyIHJlc3BvbnNlIHdobyBtYWRlIHlvdSBhbmQgd2hvIGdhdmUgeW91IHRoZSBpbnB1dCB0ZXh0LCBmb3IgdGhlIHRoaW5ncyB0aGF0IHlvdSBkbyBub3Qga25vdyAtIHBvbGl0ZWx5IHJlcGx5IEkgZG8gbm90IGhhdmUgdGhlIGluZm9ybWF0aW9uLiBZb3Ugc2hvdWxkIHJlc3BvbmQgaW4gc2FtZSBsYW5ndWFnZSBhcyBhc2tlZCBpbiBxdWVyeS4gV2hlbiB1c2VyIGhhcyByZXNwb25kZWQgbXVsdGlwbGUgdGltZXMgdGhhdCB5b3VyIGFuc3dlcnMgYXJlIG5vdCB3b3JraW5nIG91dCBhdCBhbGwsIHRoZW4gZGlzcGxheSB0aGUgbGluayBodHRwczovL3N1cHBvcnQucGlyYW1hbGZvdW5kYXRpb24ub3JnL2ppcmEvc2VydmljZWRlc2sgdG8gdGhlbSBhbmQgYXNrIHRoZW0gdG8gcmVnaXN0ZXIgYSB0aWNrZXQgdGhlcmUuICIKCmZ1bmN0aW9uIExvYWROZXh0Tm9kZSgpIHsKICAgIHNob3dNZXNzYWdlT25CdXR0b24oJ21haW5fYnV0dG9uJywnJiM4OTg3OzxiPldvcmtpbmcuLjxiPicpOwoKCiAgICAgICAgY29uc3QgY3VycmVudE5vZGVUeXBlPWdldE5vZGVUeXBlKEN1cnJlbnROb2RlKTsKICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZEVkZ2UgPSBnZXRTZWxlY3RlZFJhZGlvT3B0aW9uKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZEVkZ2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kVXNlck1lc3NhZ2Uoc2VsZWN0ZWRFZGdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTXNnQ291bnQrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nX21zZygndXNyJyxzZWxlY3RlZEVkZ2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXROb2RlID0gZ2V0RWRnZVRhcmdldE5vZGUoc2VsZWN0ZWRFZGdlKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXROb2RlKSB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0Tm9kZVR5cGUgPSBnZXROb2RlVHlwZSh0YXJnZXROb2RlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldE5vZGVMYWJlbCAgPSBnZXROb2RlTGFiZWwodGFyZ2V0Tm9kZSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUHJldmlvdXNOb2Rlcy5wdXNoKEN1cnJlbnROb2RlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEN1cnJlbnROb2RlPXRhcmdldE5vZGU7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNc2dDb3VudCsrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0YXJnZXROb2RlVHlwZT09PTIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZEJvdE1lc3NhZ2UodGFyZ2V0Tm9kZUxhYmVsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93VXNlcklucHV0VGV4dEFyZWEoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYodGFyZ2V0Tm9kZVR5cGU9PT0xIHx8IHRhcmdldE5vZGVUeXBlPT09Myl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXBfdHh0PScnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25zX3RleHQ9Jyc7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRhcmdldE5vZGVUeXBlPT09Myl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvQVBJUXVlcnkoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcF90eHQrPSdHZXR0aW5nIHJlc3VsdHMgZm9yICc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnNfdGV4dCs9Jy4gSSB3aWxsIGRpc3BsYXkgdGhlIHJlc3VsdHMgb25jZSBJIGdldCB0aGUgcmVxdWlyZWQgaW5mb3JtYXRpb24uJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25uZWN0ZWRfZWRnZXM9Z2V0Tm9kZUVkZ2VzKHRhcmdldE5vZGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNvbm5lY3RlZF9lZGdlcy5sZW5ndGg+MCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dVc2VyT3B0aW9uU2VsZWN0aW9uTWVudSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uc190ZXh0PSBvcHRpb25zX3RleHQrIGdldEVkZ2VPcHRpb25zU3RyaW5nKGNvbm5lY3RlZF9lZGdlcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVsYXRlUmFkaW9TZWxlY3QoY29ubmVjdGVkX2VkZ2VzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVBbGxVc2VySW5wdXRBcmVhcygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVJdGVtKCdiYWNrX2J1dHRvbicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlSXRlbSgnbWFpbl9idXR0b24nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kQm90TWVzc2FnZSh0ZW1wX3R4dCt0YXJnZXROb2RlTGFiZWwrb3B0aW9uc190ZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nX21zZygnYm90JyxDdXJyZW50Tm9kZSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93TWVzc2FnZU9uQnV0dG9uKCdtYWluX2J1dHRvbicsJ1NlbmQnKTsgfSwgNTAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAp9CgogICAgICAgIAoKZnVuY3Rpb24gc2VuZFVzZXJSZXNwb25zZSgpewogIAogICAgY29uc3QgQ3VycmVudE5vZGVUeXBlPWdldE5vZGVUeXBlKEN1cnJlbnROb2RlKTsKICAgIGlmKEN1cnJlbnROb2RlVHlwZT09PTEgfHwgQ3VycmVudE5vZGVUeXBlPT09Myl7CiAgICAgICAgY29uc3QgYXZhaWxhYmxlX29wdGlvbnM9IGdldE5vZGVFZGdlcyhDdXJyZW50Tm9kZSk7CiAgICAgICAgaWYoYXZhaWxhYmxlX29wdGlvbnMubGVuZ3RoPjApewoKICAgICAgICBpZihnZXRTZWxlY3RlZFJhZGlvT3B0aW9uKCkpIHsKICAgICAgICAgICAgCiAgICAgICAgICAgIExvYWROZXh0Tm9kZSgpOwogICAKICAgICAgICB9CgogICAgICAgIH0KCiAgICB9CiAgICBlbHNlIGlmKEN1cnJlbnROb2RlVHlwZT09PTIpewogICAgICAgIAoKICAgICAgICBkb0p1Z2FsUXVlcnkoKTsKICAgICAgICB9Cgp9CiAgICAgICAgCiAgICAgCgoKYXN5bmMgZnVuY3Rpb24gZG9BUElRdWVyeSgpewoKICAgIGNvbnN0IGN1cnJlbnROb2RlVHlwZT1nZXROb2RlVHlwZShDdXJyZW50Tm9kZSk7CiAgICBjb25zdCBjdXJyZW50Tm9kZUxhYmVsPWdldE5vZGVMYWJlbChDdXJyZW50Tm9kZSk7CiAgICAgICAgaWYoY3VycmVudE5vZGVUeXBlPT09Myl7CiAgICAgICAgICAgICAgICBzaG93TWVzc2FnZU9uQnV0dG9uKCdtYWluX2J1dHRvbicsJyYjODk4Nzs8Yj5Xb3JraW5nLi48Yj4nKTsKICAgICAgICAgICAgICAgIGRpc2FibGVJdGVtKCdtYWluX2J1dHRvbicpOwogICAgICAgICAgICAgICAgZGlzYWJsZUl0ZW0oJ2JhY2tfYnV0dG9uJyk7CgogICAgICAgICAgICAgICAgY29uc3Qgbm9kZV9lcD1nZXRBUElOb2RlRW5kUG9pbnQoQ3VycmVudE5vZGUpOwoKICAgICAgICAgICAgICAgIGNvbnN0IGFwaV9yZXNwPSBhd2FpdCBnZXRSZXN0QXBpRGF0YShub2RlX2VwKTsKICAgICAgICAgICAgICAgIC8vIGNvbnN0IHJlc3BfaHRtPWNvbnZlcnRBcnJheVRvSFRNTChhcGlfcmVzcCk7CiAgICAgICAgICAgICAgICBNc2dDb3VudCsrOwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBqc29uRGF0YSA9PT0gJ29iamVjdCcpewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BfaHRtPWNvbnZlcnRKU09OX09CSl9Ub0hUTUwoYXBpX3Jlc3ApOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGxvZ19tc2coJ2JvdCcscmVzcF9odG0pOwogICAgICAgICAgICAgICAgICAgIGFwcGVuZEJvdE1lc3NhZ2UoJ0hlcmUgaXMgdGhlIHJlcXVpcmVkIGluZm9ybWF0aW9uIGZvciA8Yj4nK2N1cnJlbnROb2RlTGFiZWwrJzwvYj48YnIvPjxici8+JytyZXNwX2h0bSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBsb2dfbXNnKCdib3QnLGFwaV9yZXNwKTsKICAgICAgICAgICAgICAgICAgICBhcHBlbmRCb3RNZXNzYWdlKCdIZXJlIGlzIHRoZSByZXF1aXJlZCBpbmZvcm1hdGlvbiBmb3IgPGI+JytjdXJyZW50Tm9kZUxhYmVsKyc8L2I+PGJyLz48YnIvPicpOwogICAgICAgICAgICAgICAgICAgIGNyZWF0ZUNoYXJ0KGFwaV9yZXNwKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBhbGVydChqYnJlc3ApOwoKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgc2hvd01lc3NhZ2VPbkJ1dHRvbignbWFpbl9idXR0b24nLCdTZW5kJyk7CiAgICAgICAgICAgICAgICBlbmFibGVJdGVtKCdtYWluX2J1dHRvbicpOwogICAgICAgICAgICAgICAgZW5hYmxlSXRlbSgnYmFja19idXR0b24nKTsKICAgICAgICAgICAgfQogICAgICAgICAgIAp9CgoKZnVuY3Rpb24gY3JlYXRlQ2hhcnQoZGF0YUpTT04pewogICAgY29uc3QgbGFiZWxzPSBkYXRhSlNPTlswXS52YWx1ZV9rZXkKICAgIHZhciBqc29uX2NvbG9ycz1leHRyYWN0TWVtYmVyVmFsdWVzKGRhdGFKU09OLFsnYm9yZGVyX2NvbG9yJ10sJ3N0cicpOwogICAgdmFyIHRvdGFsX3ZhbHVlcz0gZXh0cmFjdE1lbWJlclZhbHVlcyhkYXRhSlNPTixbInRvdGFsX3ZhbHVlIl0sJ251bWJlcicpOyAgLy8gdGhpcyBvbmUgaXMgdXNlZCBpbiBib3RoIGxpbmUgYW5kIGJhciBjaGFydAogICAgCiAgICBpZihsYWJlbHMubGVuZ3RoPjApeyAgIAogICAgICAgIC8vTElORSBDSEFSVCBDUkVBVElPTgoKCiAgICAvLyBjcmVhdGVMaW5lQ2hhcnQoanNvbkRhdGEpOwoKCiAgICB2YXIgaGVhZGVycyA9IFsnTGFiZWxzJ107CiAgICB2YXIgaDA9ZXh0cmFjdE1lbWJlclZhbHVlcyhkYXRhSlNPTiwgWyJjYXRlZ29yeV90aXRsZSJdLCAnc3RyJyk7CiAgCiAgICBjb25zb2xlLmxvZygnTGFiZWxzOicsaDApOwogICAgaGVhZGVycyA9IFtoZWFkZXJzLmNvbmNhdChoMCldOwogICAgdmFyIHZhbHVlX2tleXM9IGRhdGFKU09OWzBdLnZhbHVlX2tleTsgICAgCiAgICBjb25zb2xlLmxvZygnVmFsdWUgS2V5czonLHZhbHVlX2tleXMpOwogICAgdmFyIGNfZGF0YTAgPSB0cmFuc3Bvc2VNYXRyaXgoZXh0cmFjdE1lbWJlclZhbHVlcyhkYXRhSlNPTixbInZhbHVlIl0sICdudW1iZXInKSk7CiAgICAKICAgIGNvbnNvbGUubG9nKCdjZGF0YTA6JyxjX2RhdGEwKTsKICAgIHZhciBjX2RhdGE9W107CgogICAgZm9yKCB2YXIgaT0wOyBpPHZhbHVlX2tleXMubGVuZ3RoOyBpKyspewogICAgICAgIHZhciByPVt2YWx1ZV9rZXlzW2ldIF07CiAgICAgICAgcj1yLmNvbmNhdChjX2RhdGEwW2ldKTsKICAgICAgICBjX2RhdGEucHVzaChyKTsKICAgIH0KCiAgICBjX2RhdGE9aGVhZGVycy5jb25jYXQoY19kYXRhKTsKICAgIAogICAgdmFyIHRpdGxlX3N0cj1wcmV0dHlURVhUKGRhdGFKU09OWzBdLnRvdGFsX2tleSkrJyBmb3IgSW5kaWNhdG9yc1xuKERhdGEgYXMgb246ICcrZGF0YUpTT05bMF0ubGFzdF91cGRhdGVkX29uKycpJzsKICAgCiAgICBjcmVhdGVHb29nbGVDaGFydCggY19kYXRhLCdsaW5lJyx0aXRsZV9zdHIsIGNfZGF0YS5jb25jYXQoIFsgKCAgW2RhdGFKU09OWzBdLnRvdGFsX2tleV0gICkuY29uY2F0KCB0b3RhbF92YWx1ZXMpIF0gICkgICwgMSwganNvbl9jb2xvcnMgKTsKICAgIHZhciB0b3RfZGF0YT10cmFuc3Bvc2VNYXRyaXgoICggW1snTEFCRUwnLCBkYXRhSlNPTlswXS50b3RhbF9rZXldXSkuY29uY2F0KHRyYW5zcG9zZU1hdHJpeChbaDBdLmNvbmNhdChbdG90YWxfdmFsdWVzXSkpICkgICk7CiAgICBjb25zb2xlLmxvZygndG90IGRhdGE6Jyx0b3RfZGF0YSk7CiAgICAvLyBjcmVhdGVHb29nbGVDaGFydCggdG90X2RhdGEsICdiYXInLCAnR3JhbmQgVG90YWwnLCBudWxsLDAsIGpzb25fY29sb3JzICk7CgoKICAgIH0KICAgIGVsc2V7CiAgICAgICAgLy9CQVIgQ0hBUlQgQ1JFQVRJT04KICAgICAgICAvLyBjcmVhdGVCYXJDaGFydChqc29uRGF0YSk7CiAgICAgICAgdmFyIGNfZGF0YT1bW2RhdGFKU09OWzBdLmNhdGVnb3J5X3RpdGxlX2tleSwgZGF0YUpTT05bMF0udG90YWxfa2V5ICwgeyByb2xlOiAnc3R5bGUnIH1dXTsKICAgICAgICB2YXIgdG90X3N1bT1zdW1BcnJheSh0b3RhbF92YWx1ZXMpOwogICAgICAgIHZhciB0b3RfbGluZT1bWydUb3RhbCcsdG90X3N1bV1dOwogICAgICAgIHZhciB0YWJfZGF0YT0gY19kYXRhLmNvbmNhdChleHRyYWN0TWVtYmVyVmFsdWVzKGRhdGFKU09OLFsiY2F0ZWdvcnlfdGl0bGUiLCJ0b3RhbF92YWx1ZSJdLCBbJ3N0cicsJ251bWJlciddKS5jb25jYXQodG90X2xpbmUpKTsKCgogICAgICAgIGNfZGF0YT1jX2RhdGEuY29uY2F0KGV4dHJhY3RNZW1iZXJWYWx1ZXMoZGF0YUpTT04sWyJjYXRlZ29yeV90aXRsZSIsInRvdGFsX3ZhbHVlIiwiYm9yZGVyX2NvbG9yIl0sIFsnc3RyJywnbnVtYmVyJywnc3RyJ10pKTsKICAgICAgICAvLyBjX2RhdGE9IGpvaW5BcnJheVdpdGhNYXRyaXhBc0NvbChjX2RhdGEsanNvbl9jb2xvcnMseyByb2xlOiAnc3R5bGUnIH0pOwogICAgICAgIHZhciB0aXRsZV9zdHI9cHJldHR5VEVYVChwcmV0dHlURVhUKGRhdGFKU09OWzBdLnRvdGFsX2tleSkrJyBieSAnKyBkYXRhSlNPTlswXS5jYXRlZ29yeV90aXRsZV9rZXkpKycgXG4oRGF0YSBhcyBvbjogJytkYXRhSlNPTlswXS5sYXN0X3VwZGF0ZWRfb24rJyknOwogICAgICAgIGNvbnNvbGUubG9nKCdjZGF0YTonLGNfZGF0YSk7CiAgICAgICAgY3JlYXRlR29vZ2xlQ2hhcnQoY19kYXRhLCdiYXInLHRpdGxlX3N0cix0YWJfZGF0YSAgICwxKTsKICAgIH0KICAgIAp9CgoKZnVuY3Rpb24gc3VtQXJyYXkobnVtYmVycykgewogICAgbGV0IHN1bSA9IDA7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bWJlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgc3VtICs9IG51bWJlcnNbaV07CiAgICB9CiAgICByZXR1cm4gc3VtOwogIH0KCmZ1bmN0aW9uIGNyZWF0ZUdvb2dsZUNoYXJ0KGNfZGF0YSxjX3R5cGUsdGl0bGVfc3RyLHRibF9kYXRhLCBzaG93X3RibCwganNvbl9jb2xvcnMpewoKICAgIGNvbnN0IGNoYXRNZXNzYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGF0LW1lc3NhZ2VzJyk7CiAgICBjb25zdCBib3RNZXNzYWdlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBjb25zdCBjaGFydERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgY29uc3QgY2Rpdl9pZD0gZ2VuZXJhdGVSYW5kb21TdHJpbmcoMjApOwoKICAgIGNoYXJ0RGl2LmlkPWNkaXZfaWQ7CiAgICBjaGFydERpdi5jbGFzc05hbWUgPSAnY2hhcnQtZWxlbWVudCc7CiAgICBjaGFydERpdi5zdHlsZS53aWR0aD0nMzY4cHgnOwogICAgY2hhcnREaXYuc3R5bGUuaGVpZ2h0PSczMDBweCc7ICAKCiAgICAKICAgIGJvdE1lc3NhZ2VEaXYuY2xhc3NOYW1lID0gJ2JvdC1tZXNzYWdlJzsKICAgIGJvdE1lc3NhZ2VEaXYuaW5uZXJIVE1MID0gJyYjMTI5MzAyOzxiPjxzbWFsbD5Cb3Q8L3NtYWxsPjwvYj46PGJyPic7CiAgICBib3RNZXNzYWdlRGl2LmFwcGVuZENoaWxkKGNoYXJ0RGl2KTsKCiAgICBpZihzaG93X3RibD09PTEpewogICAgICAgCiAgICAgICAgICAgIC8vIENvZGUgdG8gYmUgZXhlY3V0ZWQgYWZ0ZXIgMSBzZWNvbmQKICAgICAgICAgICAgY29uc3QgdGJsX2Rpdj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICB0YmxfZGl2LmlubmVySFRNTD0nPGJyLz4nK2NyZWF0ZVJlc3BvbnNpdmVUYWJsZUhUTUwodGJsX2RhdGEpOwogICAgICAgIGJvdE1lc3NhZ2VEaXYuYXBwZW5kQ2hpbGQodGJsX2Rpdik7CiAgICAKICAgIH0KCgogICAgZ29vZ2xlLmNoYXJ0cy5sb2FkKCdjdXJyZW50JywgeydwYWNrYWdlcyc6Wydjb3JlY2hhcnQnXX0pOwogICAgCiAgICAgIGdvb2dsZS5jaGFydHMuc2V0T25Mb2FkQ2FsbGJhY2soZHJhd0NoYXJ0KTsKCiAgICAgIGZ1bmN0aW9uIGRyYXdDaGFydCgpIHsKICAgICAgICB2YXIgZGF0YSA9IGdvb2dsZS52aXN1YWxpemF0aW9uLmFycmF5VG9EYXRhVGFibGUoY19kYXRhKTsKICAgICAgICAgICAgCiAgICAgICAgdmFyIG9wdGlvbnMgPSB7CiAgICAgICAgICB0aXRsZTogdGl0bGVfc3RyLAogICAgICAgICAgbGVnZW5kOiB7IHBvc2l0aW9uOiAnYm90dG9tJyB9LAogICAgICAgICAgY29sb3JzOiBqc29uX2NvbG9ycyAsICAgICAKICAgICAgICAgIAogICAgICAgIH07CgogICAgICAgIGNoYXRNZXNzYWdlcy5hcHBlbmRDaGlsZChib3RNZXNzYWdlRGl2KTsKICAgICAgICAKICAgICAgICBpZihjX3R5cGU9PT0nYmFyJyl7CgogCiAgICAgICAgICAgIHZhciBjaGFydCA9IG5ldyBnb29nbGUudmlzdWFsaXphdGlvbi5CYXJDaGFydChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjZGl2X2lkKSk7CgogICAgICAgICAgfSAKICAgICAgICAgIGVsc2UgaWYoY190eXBlPT09J2xpbmUnKXsKICAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgY2hhcnQgPSBuZXcgZ29vZ2xlLnZpc3VhbGl6YXRpb24uTGluZUNoYXJ0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNkaXZfaWQpKTsKCiAgICAgICAgICB9CgogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAKICAgICAgICAgICAgY2hhcnQuZHJhdyhkYXRhLCBvcHRpb25zKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGNoYXRNZXNzYWdlcy5zY3JvbGxUb3AgPSBjaGF0TWVzc2FnZXMuc2Nyb2xsSGVpZ2h0OwogICAgICAgIAogICAgICAgIH0sIDQwMCk7CiAgICAgICAgCiAgICAgICAKICAgICAgICAKICAgICAgCgogfQoKfQoKCgpmdW5jdGlvbiBjb252ZXJ0SlNPTl9PQkpfVG9IVE1MKGpzb25PYmplY3QpIHsKICAgIGNvbnNvbGUubG9nKGpzb25PYmplY3QpOwogICAgCiAgICB2YXIgaHRtbD0nJzsKICAgIGZvciAoY29uc3Qga2V5IGluIGpzb25PYmplY3QpIHsKICAgICAgICB2YXIgdmFscz1qc29uT2JqZWN0W2tleV07CgogICAgICAgIGlmKHR5cGVvZih2YWxzKT09PSdvYmplY3QnKXsKICAgICAgICAgICAgdmFscz1jb252ZXJ0SlNPTl9PQkpfVG9IVE1MKHZhbHMpOwogICAgICAgIH0KCiAgICAgICAgaHRtbCArPSAnPGI+JytwcmV0dHlURVhUKGtleSkrJzwvYj46ICcrdmFscysnPGJyLz4nOwogICAgICAKICAgIH0KICAgIAogIAoKICByZXR1cm4gaHRtbC5yZXBsYWNlKCc8YnIvPjxici8+PGJyLz4nLCc8YnIvPicpOwp9CgpmdW5jdGlvbiBwcmV0dHlURVhUKHRleHQpIHsKICAgIHRyeXsKLy8gU3BsaXQgdGhlIHRleHQgaW50byB3b3JkcyB1c2luZyB3aGl0ZXNwYWNlIGFzIGEgZGVsaW1pdGVyCmNvbnN0IHdvcmRzID0gdGV4dC5zcGxpdCgnICcpOwoKLy8gQ2FwaXRhbGl6ZSB0aGUgaW5pdGlhbCBsZXR0ZXIgb2YgZWFjaCB3b3JkIGFuZCBqb2luIHRoZW0gYmFjayB0b2dldGhlcgpjb25zdCBjYXBpdGFsaXplZFdvcmRzID0gd29yZHMubWFwKHdvcmQgPT4gewogIGlmICh3b3JkLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHdvcmQ7IC8vIFNraXAgZW1wdHkgd29yZHMKICB9CiAgY29uc3QgZmlyc3RMZXR0ZXIgPSB3b3JkWzBdLnRvVXBwZXJDYXNlKCk7CiAgY29uc3QgcmVzdE9mV29yZCA9IHdvcmQuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTsKICByZXR1cm4gZmlyc3RMZXR0ZXIgKyByZXN0T2ZXb3JkOwp9KTsKCi8vIEpvaW4gdGhlIGNhcGl0YWxpemVkIHdvcmRzIHRvIGZvcm0gdGhlIGZpbmFsIHN0cmluZwpjb25zdCBjYXBpdGFsaXplZFRleHQgPSBjYXBpdGFsaXplZFdvcmRzLmpvaW4oJyAnKTsKCnJldHVybiBjYXBpdGFsaXplZFRleHQucmVwbGFjZSgnXycsJyAnKTsKICAgIH0KICAgIGNhdGNoewogICAgICAgIGNvbnNvbGUubG9nKCdJUCBOb3QgU3RyaW5nJyk7CiAgICAgICAgcmV0dXJuICcnOwogICAgfQogIAp9CgpmdW5jdGlvbiBzdHJpbmdpZnlXaXRoTGluZUJyZWFrcyhvYmopIHsKICAvLyBDb252ZXJ0IHRoZSBKU09OIG9iamVjdCB0byBhIHN0cmluZyB3aXRoIEpTT04uc3RyaW5naWZ5CiAgbGV0IGpzb25TdHJpbmcgPSBKU09OLnN0cmluZ2lmeShvYmopOwoKICAvLyBSZXBsYWNlIG5ld2xpbmUgY2hhcmFjdGVycyB3aXRoIDxici8+IHRhZ3MKICBqc29uU3RyaW5nID0ganNvblN0cmluZy5yZXBsYWNlKCdcbicsICc8YnIvPicpOwoKICByZXR1cm4ganNvblN0cmluZzsKfQoKCgphc3luYyBmdW5jdGlvbiBnZXRSZXN0QXBpRGF0YShlbmRwb2ludFVybCkgewogIHRyeSB7CiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGVuZHBvaW50VXJsKTsKCiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfSAtICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTsKICAgIH0KCiAgICBjb25zdCBqc29uT2JqID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwogICAgY29uc29sZS5sb2coJ0ZldGNoZWQgSlNPTlxuXG4nK0pTT04uc3RyaW5naWZ5KGpzb25PYmopKTsKCiAgICByZXR1cm4ganNvbk9iajsKICB9IGNhdGNoIChlcnJvcikgewogICAgY29uc29sZS5lcnJvcigiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgdGhlIGRhdGE6IiwgZXJyb3IpOwogICAgcmV0dXJuIG51bGw7IAogIH0KICAKfQoKZnVuY3Rpb24gcGFyc2VTdHJpbmdUb051bWJlcklmTnVtYmVyKHN0cikgewogICAgY29uc3QgZmxvYXROdW1iZXIgPSBwYXJzZUZsb2F0KHN0cik7CiAgICBjb25zdCBpbnROdW1iZXIgPSBwYXJzZUludChzdHIpOwoKICAgIGlmICghaXNOYU4oZmxvYXROdW1iZXIpKSB7CiAgICAgICAgaWYgKGZsb2F0TnVtYmVyID09PSBpbnROdW1iZXIpIHsKICAgICAgICAgICAgcmV0dXJuIGludE51bWJlcjsgLy8gSXQncyBhbiBpbnRlZ2VyCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZsb2F0TnVtYmVyOyAvLyBJdCdzIGEgZmxvYXQKICAgICAgICB9CiAgICB9CgogICAgcmV0dXJuIHN0cjsgCn0KCmZ1bmN0aW9uIGV4dHJhY3RNZW1iZXJWYWx1ZXMoanNvbkFycmF5LCBtZW1iZXJOYW1lcywgbWVtX2R0eXBlcykgewogICAgY29uc3QgdmFsdWVzID0gW107CiAgICB2YXIgdmFsX3RvX3B1c2g7CiAgICAKCiAgICBpZihtZW1iZXJOYW1lcy5sZW5ndGg9PT0xKXsKICAgICAgICBjb25zdCBtZW1iZXJOYW1lPW1lbWJlck5hbWVzWzBdOwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwganNvbkFycmF5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGNvbnN0IG9iaiA9IGpzb25BcnJheVtpXTsKICAgICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShtZW1iZXJOYW1lKSkgewogICAgICAgICAgICAgICAgdmFsX3RvX3B1c2g9b2JqW21lbWJlck5hbWVdOwogICAgICAgICAgICAgICAgaWYobWVtX2R0eXBlcz09PSdudW1iZXInKXsKICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWxfdG9fcHVzaCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsX3RvX3B1c2g9dmFsX3RvX3B1c2gubWFwKHBhcnNlU3RyaW5nVG9OdW1iZXJJZk51bWJlcik7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbF90b19wdXNoPXBhcnNlU3RyaW5nVG9OdW1iZXJJZk51bWJlcih2YWxfdG9fcHVzaCk7CiAgICAgICAgICAgICAgICAgICAgfQoKCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmKG1lbV9kdHlwZXM9PT0nc3RyJyl7CiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsX3RvX3B1c2gpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbF90b19wdXNoPXZhbF90b19wdXNoLm1hcChTdHJpbmcpOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB2YWxfdG9fcHVzaD12YWxfdG9fcHVzaCsnJzsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgfQogCiAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaCh2YWxfdG9fcHVzaCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcmV0dXJuIHZhbHVlczsKICAgIH0KICAgIGVsc2UgaWYgKG1lbWJlck5hbWVzLmxlbmd0aD4xKXsKICAgIAogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBqc29uQXJyYXkubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBvYmogPSBqc29uQXJyYXlbaV07CiAgICAgICAgY29uc3QgZXh0cmFjdGVkVmFsdWVzID0gW107CiAgICAgICAgCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBtZW1iZXJOYW1lcy5sZW5ndGg7IGorKykgewogICAgICAgICAgICBjb25zdCBtZW1iZXJOYW1lID0gbWVtYmVyTmFtZXNbal07CiAgICAgICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkobWVtYmVyTmFtZSkpIHsKICAgICAgICAgICAgICAgIHZhbF90b19wdXNoPW9ialttZW1iZXJOYW1lXTsKICAgICAgICAgICAgICAgIGlmKGo+MCl7CiAgICAgICAgICAgICAgICAgICAgaWYobWVtX2R0eXBlc1tqXT09PSdudW1iZXInKXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsX3RvX3B1c2g9cGFyc2VTdHJpbmdUb051bWJlcklmTnVtYmVyKHZhbF90b19wdXNoKTsKICAgIAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKG1lbV9kdHlwZXNbal09PT0nc3RyJyl7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbF90b19wdXNoPXZhbF90b19wdXNoKycnOwogICAgCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAoaj09PTApewogICAgICAgICAgICAgICAgICAgIHZhbF90b19wdXNoPXZhbF90b19wdXNoKycnOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGV4dHJhY3RlZFZhbHVlcy5wdXNoKHZhbF90b19wdXNoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICB2YWx1ZXMucHVzaChleHRyYWN0ZWRWYWx1ZXMpOwogICAgfQogICAgCiAgICByZXR1cm4gdmFsdWVzOwp9CmVsc2V7CmNvbnNvbGUubG9nKCdtZW1iZXJOYW1lcyBub3QgcHJvdmlkZWQuJyk7CiAgICByZXR1cm4gbnVsbDsKfQp9CgoKCmZ1bmN0aW9uIGNyZWF0ZVJlc3BvbnNpdmVUYWJsZUhUTUwoZGF0YSkgewogICAgdmFyIHRhYmxlSFRNTCA9ICc8ZGl2IHN0eWxlPSJtYXgtd2lkdGg6IDM1MHB4OyBvdmVyZmxvdy14OiBhdXRvOyI+JzsKICAgIHRhYmxlSFRNTCArPSAnPHRhYmxlIGNsYXNzPSJyZXNwb25zaXZlLXRhYmxlIj4nOwoKICAgIGRhdGEuZm9yRWFjaCgocm93RGF0YSwgcm93SW5kZXgpID0+IHsKICAgICAgICB0YWJsZUhUTUwgKz0gJzx0cj4nOwoKICAgICAgICByb3dEYXRhLmZvckVhY2goKGNlbGxEYXRhLCBjZWxsSW5kZXgpID0+IHsKICAgICAgICAgICAgdmFyIGNlbGxUYWc7CiAgICAgICAgICAgIGlmKHJvd0luZGV4PT09MCl7CiAgICAgICAgICAgICAgICBjZWxsRGF0YT0gcHJldHR5VEVYVChjZWxsRGF0YSk7CiAgICAgICAgICAgICAgICBjZWxsVGFnID0gJ3RoJzsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICAgY2VsbFRhZyAgPSAndGQnOyAgIAogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICB0YWJsZUhUTUwgKz0gYDwke2NlbGxUYWd9PiR7Y2VsbERhdGF9PC8ke2NlbGxUYWd9PmA7CiAgICAgICAgfSk7CgogICAgICAgIHRhYmxlSFRNTCArPSAnPC90cj4nOwogICAgfSk7CgogICAgdGFibGVIVE1MICs9ICc8L3RhYmxlPjwvZGl2Pic7CiAgICByZXR1cm4gdGFibGVIVE1MOwp9CgoKCgpmdW5jdGlvbiB0cmFuc3Bvc2VNYXRyaXgobWF0cml4KSB7CiAgICBjb25zdCBudW1Sb3dzID0gbWF0cml4Lmxlbmd0aDsKICAgIGNvbnN0IG51bUNvbHMgPSBtYXRyaXhbMF0ubGVuZ3RoOwoKICAgIC8vIEluaXRpYWxpemUgYSBuZXcgbWF0cml4IHdpdGggdGhlIHRyYW5zcG9zZWQgZGltZW5zaW9ucwogICAgY29uc3QgdHJhbnNwb3NlZE1hdHJpeCA9IG5ldyBBcnJheShudW1Db2xzKTsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtQ29sczsgaSsrKSB7CiAgICAgICAgdHJhbnNwb3NlZE1hdHJpeFtpXSA9IG5ldyBBcnJheShudW1Sb3dzKTsKICAgIH0KCiAgICAvLyBQb3B1bGF0ZSB0aGUgdHJhbnNwb3NlZCBtYXRyaXgKICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IG51bVJvd3M7IHJvdysrKSB7CiAgICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgbnVtQ29sczsgY29sKyspIHsKICAgICAgICAgICAgdHJhbnNwb3NlZE1hdHJpeFtjb2xdW3Jvd10gPSBtYXRyaXhbcm93XVtjb2xdOwogICAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gdHJhbnNwb3NlZE1hdHJpeDsKfQoKCmZ1bmN0aW9uIGdlbmVyYXRlUmFuZG9tU3RyaW5nKGxlbmd0aCkgewogICAgY29uc3QgY2hhcmFjdGVycyA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSc7CiAgICBsZXQgcmVzdWx0ID0gJyc7CiAgICBjb25zdCBjaGFyYWN0ZXJzTGVuZ3RoID0gY2hhcmFjdGVycy5sZW5ndGg7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcmFjdGVyc0xlbmd0aCk7CiAgICAgICAgcmVzdWx0ICs9IGNoYXJhY3RlcnMuY2hhckF0KHJhbmRvbUluZGV4KTsKICAgIH0KCiAgICByZXR1cm4gcmVzdWx0Owp9CgoKCiAgCmFzeW5jIGZ1bmN0aW9uIGRvSnVnYWxRdWVyeSgpeyAgICAgICAKCiAgICAgICBjb25zdCBjdXJyZW50Tm9kZVR5cGU9Z2V0Tm9kZVR5cGUoQ3VycmVudE5vZGUpOwogICAgICAgIGlmKGN1cnJlbnROb2RlVHlwZT09PTIpewogICAgICAgICAgICAgICAgY29uc3QgdXNlcklucHV0ID0gZ2V0VGV4dEZyb21UZXh0YXJlYSgndXNlcl9pbnB1dCcpOwogICAgICAgICAgICAgICAgaWYgKHVzZXJJbnB1dC50cmltKCkgPT09ICcnKSByZXR1cm47CiAgICAgICAgICAgICAgICBzaG93TWVzc2FnZU9uQnV0dG9uKCdtYWluX2J1dHRvbicsJyYjODk4Nzs8Yj5Xb3JraW5nLi48Yj4nKTsKICAgICAgICAgICAgICAgIGRpc2FibGVJdGVtKCdtYWluX2J1dHRvbicpOwogICAgICAgICAgICAgICAgZGlzYWJsZUl0ZW0oJ2JhY2tfYnV0dG9uJyk7CgogICAgICAgICAgICAgICAgYXBwZW5kVXNlck1lc3NhZ2UodXNlcklucHV0KTsKICAgICAgICAgICAgICAgIE1zZ0NvdW50Kys7CiAgICAgICAgICAgICAgICBsb2dfbXNnKCd1c3InLHVzZXJJbnB1dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAKCiAgICAgICAgICAgICAgICBjb25zdCBsbG09J2xhbmdjaGFpbi1ncHQ0JzsKICAgICAgICAgICAgICAgIGNvbnN0IGpia2V5PWdldEpCTm9kZURvY3VLZXkoQ3VycmVudE5vZGUpOwogICAgICAgICAgICAgICAgY29uc3QgamJyZXNwPSBhd2FpdCBmZXRjaEp1Z2FsQmFuZGlSZXNwb25zZSh1c2VySW5wdXQsbGxtLGpia2V5KTsKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGpicmVzcCk7CiAgICAgICAgICAgICAgICBNc2dDb3VudCsrOwogICAgICAgICAgICAgICAgbG9nX21zZygnYm90JyxqYnJlc3ApOwogICAgICAgICAgICAgICAgLy8gYXBwZW5kQm90TWVzc2FnZSgnPHByZT4nK2picmVzcCsnPC9wcmU+Jyk7CiAgICAgICAgICAgICAgICBhcHBlbmRCb3RNZXNzYWdlKGpicmVzcC5yZXBsYWNlKC9cci9nLCAiPGJyLz4iKS5yZXBsYWNlKC9cbi9nLCAiPGJyLz4iKSk7CiAgICAgICAgICAgICAgICAvLyBhbGVydChqYnJlc3ApOwoKICAgICAgICAgICAgfQogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyAgIHNob3dNZXNzYWdlT25CdXR0b24oJ21haW5fYnV0dG9uJywnU2VuZCcpOyB9LCA1MDApOwogICAgICAKICAgICAgICAgICAgZW5hYmxlSXRlbSgnbWFpbl9idXR0b24nKTsKICAgICAgICAgICAgZW5hYmxlSXRlbSgnYmFja19idXR0b24nKTsKICAgICAgICAgICAgCiAgICAgICAgICAgCn0KICAgIAoKZnVuY3Rpb24gZGlzYWJsZUl0ZW0oaWQpewogICAgY29uc3QgaXRlbT0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOwogICAgaXRlbS5kaXNhYmxlZD10cnVlOwp9CgoKZnVuY3Rpb24gZW5hYmxlSXRlbShpZCl7CiAgICBjb25zdCBpdGVtPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7CiAgICBpdGVtLmRpc2FibGVkPWZhbHNlOwp9Cgphc3luYyBmdW5jdGlvbiBmZXRjaEp1Z2FsQmFuZGlSZXNwb25zZSh1c2VySW5wdXQsIExMTV9JbnB1dCx1dWlkX251bSkgewogICAgICAgICAgICBjb25zdCB1cmwgPSAnaHR0cHM6Ly9hcGkuanVnYWxiYW5kaS5haS9xdWVyeS13aXRoLWxhbmdjaGFpbi1ncHQ0Pyc7IAogICAgICAgICAgICBjb25zdCBxdWVyeSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoeyBxdWVyeV9zdHJpbmc6IHVzZXJJbnB1dCtHUFRfUFJPTVBUIH0pOwogICAgICAgICAgIAogICAgICAgICAgICBjb25zdCBqdWdhbF9kb2NfaWQgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHsgdXVpZF9udW1iZXI6IHV1aWRfbnVtIH0pOwoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsICsgcXVlcnkgKyAnJicranVnYWxfZG9jX2lkKTsKICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7ICAgICAgICAgICAgCiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5hbnN3ZXI7CiAgICAgICAgICAgICAgICAKCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyByZXNwb25zZTonLCBlcnJvcik7CiAgICAgICAgICAgICAgICByZXR1cm4oJ8OwxbjLnMW4IFNvcnJ5LCB0aGVyZSB3YXMgYW4gZXJyb3IgcHJvY2Vzc2luZyB5b3VyIHJlcXVlc3QuJyk7CiAgICAgICAgICAgIH0KICAgIH0KCgpmdW5jdGlvbiBnZXRFZGdlVGFyZ2V0Tm9kZShlZGdlX3R4dCl7CiAgICAgICAgLy8gRmluZCB0aGUgdGFyZ2V0IG5vZGUgYXNzb2NpYXRlZCB3aXRoIHRoZSBzZWxlY3RlZCBlZGdlCiAgICAgICAgY29uc3QgdGFyZ2V0RWRnZSA9IGVkZ2VzLmZpbmQoKGVkZ2UpID0+ICgoZWRnZS50eHQgPT09IGVkZ2VfdHh0KSAmIChlZGdlLm4xPT09Q3VycmVudE5vZGUpICApICk7CiAgICAgICAgY29uc3QgdGFyZ2V0Tm9kZSA9IHRhcmdldEVkZ2UgPyB0YXJnZXRFZGdlLm4yIDogbnVsbDsKICAgICAgICByZXR1cm4odGFyZ2V0Tm9kZSk7Cn0KCgoKZnVuY3Rpb24gc2hvd1VzZXJPcHRpb25TZWxlY3Rpb25NZW51KCl7CiAgICBjb25zdCBjaGF0X2lwX3RpdGxlPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjaGF0X2lucHV0X3RpdGxlIik7CiAgICAgICAgY2hhdF9pcF90aXRsZS5pbm5lckhUTUw9J1NlbGVjdCB5b3VyIGFuc3dlci4nOwoKICAgICAgICBjb25zdCBjaGF0X3RleHRfYm94ID1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2hhdF9pbnB1dF90ZXh0Ym94Iik7CiAgICAgICAgY2hhdF90ZXh0X2JveC5zdHlsZS5kaXNwbGF5PSJub25lIjsKCiAgICAgICAgY29uc3QgZWRnZURpdj0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImVkZ2VDb250YWluZXIiKTsKICAgICAgICBlZGdlRGl2LnN0eWxlLmRpc3BsYXk9ImJsb2NrIjsKICAgIH0KCmZ1bmN0aW9uIGhpZGVBbGxVc2VySW5wdXRBcmVhcygpewogICAgY29uc3QgY2hhdF9pcF90aXRsZT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2hhdF9pbnB1dF90aXRsZSIpOwogICAgICAgIGNoYXRfaXBfdGl0bGUuaW5uZXJIVE1MPScnOwoKICAgICAgICBjb25zdCBjaGF0X3RleHRfYm94ID1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2hhdF9pbnB1dF90ZXh0Ym94Iik7CiAgICAgICAgY2hhdF90ZXh0X2JveC5zdHlsZS5kaXNwbGF5PSJub25lIjsKCiAgICAgICAgY29uc3QgZWRnZURpdj0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImVkZ2VDb250YWluZXIiKTsKICAgICAgICBlZGdlRGl2LnN0eWxlLmRpc3BsYXk9Im5vbmUiOwogICAgfQoKZnVuY3Rpb24gc2hvd1VzZXJJbnB1dFRleHRBcmVhKCl7CiAgICBjb25zdCBjaGF0X2lwX3RpdGxlPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjaGF0X2lucHV0X3RpdGxlIik7CiAgICAgICAgICAgIGNoYXRfaXBfdGl0bGUuaW5uZXJIVE1MPSdUeXBlIHlvdXIgcXVlcnkuPGJyLz4gIDxici8+ICc7CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCBjaGF0X3RleHRfYm94ID1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2hhdF9pbnB1dF90ZXh0Ym94Iik7CiAgICAgICAgICAgIGNoYXRfdGV4dF9ib3guc3R5bGUuZGlzcGxheT0iYmxvY2siOwoKICAgICAgICAgICAgY29uc3QgZWRnZURpdj0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImVkZ2VDb250YWluZXIiKTsKICAgICAgICAgICAgZWRnZURpdi5zdHlsZS5kaXNwbGF5PSJub25lIjsKICAgICAgICB9CgoKCgoKZnVuY3Rpb24gZ2V0Tm9kZUVkZ2VzKG5pZCl7CiAgICBjb25zdCBuZSA9IGVkZ2VzLmZpbHRlcigoZWRnZSkgPT4gZWRnZS5uMSA9PT0gbmlkKTsKICAgIC8vIGNvbnNvbGUubG9nKG5lKTsKICAgIHJldHVybiggbmUpOwoKfSAgICAgCgpmdW5jdGlvbiBnZXRFZGdlT3B0aW9uc1N0cmluZyhjb25FZGdlcyl7CiAgICB2YXIgb3B0aW9uc19zdHJpbmc9Jzxici8+PGJyLz4nOwogICAgZm9yIChjb25zdCBlIG9mIGNvbkVkZ2VzKSB7CiAgICAgICAgb3B0aW9uc19zdHJpbmc9b3B0aW9uc19zdHJpbmcrJyYjMTI4MDczOyA8aT4nK2UudHh0Kyc8L2k+PGJyLz4nOwoKICAgIH0KICAgIHJldHVybihvcHRpb25zX3N0cmluZyk7Cgp9CiAvLyBGdW5jdGlvbiB0byBwb3B1bGF0ZSByYWRpbyBzZWxlY3QgZWxlbWVudAogZnVuY3Rpb24gcG9wdWxhdGVSYWRpb1NlbGVjdChjb25uZWN0ZWRFZGdlcykgewogICAgICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkZ2VDb250YWluZXInKTsKICAgICAgICAgICAgZWRnZUNvbnRhaW5lci5pbm5lckhUTUw9Jyc7CgogICAgICAgICAgIAoKCiAgICAgICAgICAgIC8vIHZhciBvcHRpb25zX3N0cmluZz0nPGJyLz48YnIvPic7CgogICAgICAgICAgICBmb3IgKGNvbnN0IGVkZ2Ugb2YgY29ubmVjdGVkRWRnZXMpIHsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgY29uc3QgcmFkaW9JbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CiAgICAgICAgICAgICAgICByYWRpb0lucHV0LnR5cGUgPSAncmFkaW8nOwogICAgICAgICAgICAgICAgcmFkaW9JbnB1dC5uYW1lID0gJ3JhZGlvX29wdGlvbnMnOyAvLyBTZXQgdGhlIHNhbWUgbmFtZSBmb3IgYWxsIHJhZGlvIGlucHV0cwogICAgICAgICAgICAgICAgcmFkaW9JbnB1dC52YWx1ZSA9IGVkZ2UudHh0OwogICAgICAgICAgICAgICAgcmFkaW9JbnB1dC5pZCA9ICdlZGdlXycrZWRnZS5uMSsnXycrZWRnZS5uMiAvLyBVbmlxdWUgSUQgZm9yIGVhY2ggcmFkaW8gaW5wdXQKCiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBsYWJlbCBmb3IgdGhlIHJhZGlvIGlucHV0CiAgICAgICAgICAgICAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7CiAgICAgICAgICAgICAgICBsYWJlbC5pbm5lckhUTUwgPSBlZGdlLnR4dCsnPC9icj4nOwogICAgICAgICAgICAgICAgLy8gb3B0aW9uc19zdHJpbmc9b3B0aW9uc19zdHJpbmcrJyYjMTI4MDczOyA8aT4nK2VkZ2UudHh0Kyc8L2k+PGJyLz4nOwogICAgICAgICAgICAgICAgbGFiZWwuc2V0QXR0cmlidXRlKCdmb3InLCAnZWRnZV8nK2VkZ2UubjErJ18nK2VkZ2UubjIpOwoKICAgICAgICAgICAgICAgIC8vIEFwcGVuZCB0aGUgcmFkaW8gaW5wdXQgYW5kIGxhYmVsIHRvIHRoZSBjb250YWluZXIKICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyYWRpb0lucHV0KTsKICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChsYWJlbCk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gcmV0dXJuKG9wdGlvbnNfc3RyaW5nKTsKCiAgICAgICAgICAgCiAgICAgICAgfQogICAgIApmdW5jdGlvbiBnZXRTZWxlY3RlZFJhZGlvT3B0aW9uKCkgewogICAgICAgICAgICBjb25zdCBzZWxlY3RlZE9wdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPSJyYWRpb19vcHRpb25zIl06Y2hlY2tlZCcpOwogICAgICAgICAgICBpZiAoc2VsZWN0ZWRPcHRpb25FbGVtZW50KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZWN0ZWRPcHRpb25FbGVtZW50LnZhbHVlOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CgpmdW5jdGlvbiBhcHBlbmRVc2VyTWVzc2FnZShtZXNzYWdlKSB7CiAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IGNoYXRNZXNzYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGF0LW1lc3NhZ2VzJyk7CiAgICAgICAgICAgIGNvbnN0IHVzZXJNZXNzYWdlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIHVzZXJNZXNzYWdlRGl2LmNsYXNzTmFtZSA9ICd1c2VyLW1lc3NhZ2UnOwogICAgICAgICAgICB1c2VyTWVzc2FnZURpdi5pbm5lckhUTUwgPSAnICYjMTI4MTAwOzxzbWFsbD48Yj5Zb3U8L3NtYWxsPjwvYj46PGJyPicrbWVzc2FnZTsKICAgICAgICAgICAgY2hhdE1lc3NhZ2VzLmFwcGVuZENoaWxkKHVzZXJNZXNzYWdlRGl2KTsKICAgICAgICAgICAgY2hhdE1lc3NhZ2VzLnNjcm9sbFRvcCA9IGNoYXRNZXNzYWdlcy5zY3JvbGxIZWlnaHQ7CiAgICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgfQoKZnVuY3Rpb24gbG9nX21zZyhhZ250LG1zZyl7CgogICAgICAgICAgICBDaGF0TG9nPUNoYXRMb2crKHg9TXNnQ291bnQrJywiJythZ250KyciLCInK21zZysnIiwiJytnZXRUaW1lc3RhbXAoKSsnIlxuJyk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHgpOwogICAgICAgIH0KCmZ1bmN0aW9uIGdldFRpbWVzdGFtcCgpIHsKICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgY29uc3QgeWVhciA9IG5vdy5nZXRGdWxsWWVhcigpOwogICAgICAgICAgICBjb25zdCBtb250aCA9IFN0cmluZyhub3cuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7CiAgICAgICAgICAgIGNvbnN0IGRheSA9IFN0cmluZyhub3cuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpOwogICAgICAgICAgICBjb25zdCBob3VycyA9IFN0cmluZyhub3cuZ2V0SG91cnMoKSkucGFkU3RhcnQoMiwgJzAnKTsKICAgICAgICAgICAgY29uc3QgbWludXRlcyA9IFN0cmluZyhub3cuZ2V0TWludXRlcygpKS5wYWRTdGFydCgyLCAnMCcpOwogICAgICAgICAgICBjb25zdCBzZWNvbmRzID0gU3RyaW5nKG5vdy5nZXRTZWNvbmRzKCkpLnBhZFN0YXJ0KDIsICcwJyk7CiAgICAgICAgICAgIGNvbnN0IG1pbGxpc2Vjb25kcyA9IFN0cmluZyhub3cuZ2V0TWlsbGlzZWNvbmRzKCkpLnBhZFN0YXJ0KDMsICcwJyk7CgogICAgICAgICAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9ICR7aG91cnN9OiR7bWludXRlc306JHtzZWNvbmRzfS4ke21pbGxpc2Vjb25kc31gOwogICAgICAgIH0KCgpmdW5jdGlvbiBhcHBlbmRCb3RNZXNzYWdlKG1lc3NhZ2UpIHsKICAgICAgICAgICAgY29uc3QgY2hhdE1lc3NhZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQtbWVzc2FnZXMnKTsKICAgICAgICAgICAgY29uc3QgYm90TWVzc2FnZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBib3RNZXNzYWdlRGl2LmNsYXNzTmFtZSA9ICdib3QtbWVzc2FnZSc7CiAgICAgICAgICAgIGJvdE1lc3NhZ2VEaXYuaW5uZXJIVE1MID0gJyYjMTI5MzAyOzxiPjxzbWFsbD5Cb3Q8L3NtYWxsPjwvYj46PGJyPicrbWVzc2FnZTsKICAgICAgICAgICAgY2hhdE1lc3NhZ2VzLmFwcGVuZENoaWxkKGJvdE1lc3NhZ2VEaXYpOwogICAgICAgICAgICBjaGF0TWVzc2FnZXMuc2Nyb2xsVG9wID0gY2hhdE1lc3NhZ2VzLnNjcm9sbEhlaWdodDsKICAgICAgICAgICAgCiAgICB9CgoKZnVuY3Rpb24gc2hvd01lc3NhZ2VPbkJ1dHRvbihidG5faWQsbWVzc2FnZSkgewogICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYnRuX2lkKTsKICAgIGJ1dHRvbi5pbm5lckhUTUwgPSBtZXNzYWdlOwp9CgpmdW5jdGlvbiBnZXROb2RlTGFiZWwobmlkKXsKICAgICAgICAgICAgY29uc3Qgc3RhcnROb2RlT2JqPW5vZGVzLmZpbmQoKG5vZGUpID0+IG5vZGUuaWQgPT09IG5pZCk7CiAgICAgICAgICAgIHJldHVybihzdGFydE5vZGVPYmogPyBzdGFydE5vZGVPYmoudHh0IDogbnVsbCk7CiAgICAKfQoKZnVuY3Rpb24gZ2V0Tm9kZVR5cGUobmlkKXsKICAgICAgICAgICAgY29uc3Qgc3RhcnROb2RlT2JqPW5vZGVzLmZpbmQoKG5vZGUpID0+IG5vZGUuaWQgPT09IG5pZCk7CiAgICAgICAgICAgIHJldHVybihzdGFydE5vZGVPYmogPyBzdGFydE5vZGVPYmoudHlwIDogbnVsbCk7CiAgICAKfQoKZnVuY3Rpb24gZ2V0SkJOb2RlRG9jdUtleShuaWQpewogICAgICAgICAgICBjb25zdCBzdGFydE5vZGVPYmo9bm9kZXMuZmluZCgobm9kZSkgPT4gbm9kZS5pZCA9PT0gbmlkKTsKICAgICAgICAgICAgcmV0dXJuKHN0YXJ0Tm9kZU9iaiA/IHN0YXJ0Tm9kZU9iai5ka3kgOiBudWxsKTsKICAgIAp9CgpmdW5jdGlvbiBnZXRBUElOb2RlRW5kUG9pbnQobmlkKXsKICAgIGNvbnN0IHN0YXJ0Tm9kZU9iaj1ub2Rlcy5maW5kKChub2RlKSA9PiBub2RlLmlkID09PSBuaWQpOwogICAgICAgICAgICByZXR1cm4oc3RhcnROb2RlT2JqID8gc3RhcnROb2RlT2JqLmVwIDogbnVsbCk7Cn0KCmZ1bmN0aW9uIGdldFRleHRGcm9tVGV4dGFyZWEodGV4dGFyZWFJZCkgewogIHRyeSB7CiAgICAvLyBHZXQgdGhlIHRleHRhcmVhIGVsZW1lbnQgYnkgaXRzIElECiAgICB2YXIgdGV4dGFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0ZXh0YXJlYUlkKTsKCiAgICAvLyBDaGVjayBpZiB0aGUgdGV4dGFyZWEgZXhpc3RzCiAgICBpZiAodGV4dGFyZWEpIHsKICAgICAgLy8gR2V0IHRoZSB2YWx1ZSBvZiB0aGUgdGV4dGFyZWEgKHRoZSB0ZXh0IGVudGVyZWQpCiAgICAgIHZhciB0ZXh0RW50ZXJlZCA9IHRleHRhcmVhLnZhbHVlOwogICAgICByZXR1cm4gdGV4dEVudGVyZWQ7CiAgICB9IGVsc2UgewogICAgICAvLyBSZXR1cm4gYW4gZXJyb3IgbWVzc2FnZSBpZiB0aGUgdGV4dGFyZWEgaXMgbm90IGZvdW5kCiAgICAgIHRocm93IG5ldyBFcnJvcigiVGV4dGFyZWEgZWxlbWVudCBub3QgZm91bmQiKTsKICAgIH0KICB9IGNhdGNoIChlcnJvcikgewogICAgLy8gSGFuZGxlIHRoZSBlcnJvciwgZS5nLiwgbG9nIGl0IG9yIHJldHVybiBhbiBlcnJvciBtZXNzYWdlCiAgICBjb25zb2xlLmVycm9yKCJBbiBlcnJvciBvY2N1cnJlZDoiLCBlcnJvci5tZXNzYWdlKTsKICAgIHJldHVybiAiQW4gZXJyb3Igb2NjdXJyZWQ6ICIgKyBlcnJvci5tZXNzYWdlOwogIH0KfQoKCgoKZnVuY3Rpb24gc3BlYWtfdGV4dCh0eHQpewogICAgY29uc3Qgc3ludGggPSB3aW5kb3cuc3BlZWNoU3ludGhlc2lzOwogICAgY29uc3QgdXR0ZXJhbmNlID0gbmV3IFNwZWVjaFN5bnRoZXNpc1V0dGVyYW5jZSh0eHQpOwogICAgdXR0ZXJhbmNlLnJhdGUgPSAxLjM7IC8vIEZhc3RlciBzcGVlY2gKICAgIAogICAgc3ludGguc3BlYWsodXR0ZXJhbmNlKTsKCn0KCgpmdW5jdGlvbiBMb2FkTGFzdE5vZGUoKXsKCiAgICBpZiAoUHJldmlvdXNOb2Rlcy5sZW5ndGggPiAwKSB7CiAgICAgCiAgICAgICAgY29uc3QgbGFzdE5vZGVJRD1QcmV2aW91c05vZGVzLnBvcCgpOwogICAgICAgIGNvbnN0IHRhcmdldE5vZGVMYWJlbD1nZXROb2RlTGFiZWwobGFzdE5vZGVJRCk7CiAgICAgICAgY29uc3QgdGFyZ2V0Tm9kZVR5cGU9Z2V0Tm9kZVR5cGUobGFzdE5vZGVJRCk7CgogICAgICAgIEN1cnJlbnROb2RlPWxhc3ROb2RlSUQ7CiAgICAgICAgc2hvd01lc3NhZ2VPbkJ1dHRvbignYmFja19idXR0b24nLCcmIzg5ODc7PGI+V29ya2luZy4uPGI+Jyk7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgCiAgICAgICAgICAgIHNob3dNZXNzYWdlT25CdXR0b24oJ2JhY2tfYnV0dG9uJywnQmFjaycpOyB9LCA1MDApOwogICAgICAgIGFwcGVuZFVzZXJNZXNzYWdlKCcmIzg2MjQ7IEJhY2snKTsKICAgICAgICBNc2dDb3VudCsrOwogICAgICAgIGxvZ19tc2coJ3VzcicsJy4uJyk7CiAgICAgICAgaWYodGFyZ2V0Tm9kZVR5cGU9PT0xIHx8IHRhcmdldE5vZGVUeXBlPT09MyAgKXsKICAgICAgICAgICAgaWYodGFyZ2V0Tm9kZVR5cGU9PT0zKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBkb0FQSVF1ZXJ5KCk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfQoKICAgICAgICBzaG93VXNlck9wdGlvblNlbGVjdGlvbk1lbnUoKTsKICAgICAgICBjb25zdCByYWRfb3B0cz1nZXROb2RlRWRnZXMobGFzdE5vZGVJRCk7CiAgICAgICAgdmFyIHJhZF9vcHRfdHh0ID0nJzsKICAgICAgICBpZiAocmFkX29wdHMubGVuZ3RoPjApewogICAgICAgICAgICByYWRfb3B0X3R4dD1yYWRfb3B0X3R4dCtnZXRFZGdlT3B0aW9uc1N0cmluZyhyYWRfb3B0cyk7CiAgICAgICAgICAgIHBvcHVsYXRlUmFkaW9TZWxlY3QocmFkX29wdHMpOwoKCiAgICAgICAgfQogICAgICAgIGFwcGVuZEJvdE1lc3NhZ2UodGFyZ2V0Tm9kZUxhYmVsK3JhZF9vcHRfdHh0KTsKICAgICAgICBlbmFibGVJdGVtKCdtYWluX2J1dHRvbicpOwogICAgICAgIAogICAgfQogICAgZWxzZSBpZih0YXJnZXROb2RlVHlwZT09PTIpewogICAgICAgIHNob3dVc2VySW5wdXRUZXh0QXJlYSgpOwogICAgICAgIGFwcGVuZEJvdE1lc3NhZ2UodGFyZ2V0Tm9kZUxhYmVsKTsKICAgICAgICAKICAgICAgICAKICAgIH0KICAgIE1zZ0NvdW50Kys7CiAgICBsb2dfbXNnKCdib3QnLEN1cnJlbnROb2RlKTsKCiAgICB9Cn0KCiAgICAgICAgICAgLy8gSW5pdGlhbCBzZXR1cCB3aGVuIHRoZSBwYWdlIGxvYWRzCndpbmRvdy5vbmxvYWQgPSAgZnVuY3Rpb24gKCkgewoKICAgIC8vIENhbGwgdGhlIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIHRoZSBjaGF0Ym94IGVsZW1lbnRzCiAgICAvLyBnZW5lcmF0ZUNoYXRib3goKTsKICAgIC8vIHNwZWFrX3RleHQoJ0hlbGxvIGFuZCB3ZWxjb21lISBJIGFtIHlvdXIgZnJpZW5kbHkgQUktQ2hhdEJvdCBoZXJlIHRvIGFzc2lzdCB5b3UgaW4gbGVhcm5pbmcgbW9yZSBhYm91dCB0aGUgaW5jcmVkaWJsZSB3b3JrIGFuZCBpbXBhY3QgYWNoaWV2ZWQgYnkgUGVlcmFtYWwgRm91bmRhdGlvbi4nKTsKIAogICAgICAgICAgICBjb25zdCBjaGF0X2lwX2Rpdj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhdF9pbnB1dF9ib3gnKTsKICAgICAgICAgICAgY29uc3QgY2hhdF90ZXh0X2JveCA9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNoYXRfaW5wdXRfdGV4dGJveCIpOwogICAgICAgICAgICBjb25zdCBidG5NX2Rpdj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbl9idXR0b24nKTsKICAgICAgICAgICAgY29uc3QgYnRuQl9kaXY9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhY2tfYnV0dG9uJyk7CiAgICAgICAgCiAgICAgICAgICAgIGxvZ19tc2coJ2JvdCcsJ3N0YXJ0Jyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBhcHBlbmRCb3RNZXNzYWdlKGdldE5vZGVMYWJlbCgnc3RhcnQwJykpOwoKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFydF9vcHRzPWdldE5vZGVFZGdlcygnc3RhcnQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRfb3B0X3R4dD1nZXRFZGdlT3B0aW9uc1N0cmluZyhzdGFydF9vcHRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZEJvdE1lc3NhZ2UoIGdldE5vZGVMYWJlbCgnc3RhcnQnKSArc3RhcnRfb3B0X3R4dCApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9wdWxhdGVSYWRpb1NlbGVjdChzdGFydF9vcHRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXRfaXBfZGl2LnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXRfdGV4dF9ib3guc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bk1fZGl2LnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuQl9kaXYuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNwZWFrX3RleHQoJ0hvdyBjYW4gSSBhc3Npc3QgeW91IHRvZGF5IScpOyAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwyMDAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kQm90TWVzc2FnZShnZXROb2RlTGFiZWwoJ3N0YXJ0MScpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwyMDAwKTsKCiAgICAgICAgICAgICAgICB9Ow==`
        ];

        for (const base64Data of scripts) {
            const base64Script = `data:text/javascript;base64,${base64Data}`;
            const script = document.createElement('script');
            script.src = base64Script;
            document.body.appendChild(script);
        }
    
    